<h2>{{ editing ? 'Edytuj użytkownika' : 'Dodaj użytkownika' }}</h2>
<form [formGroup]="userForm" (ngSubmit)="submitForm()">
    <div>
        <label for="name">Imię: </label>
        <input id="name" type="text" formControlName="name" />
    </div>
    <div>
        <label for="surname">Nazwisko: </label>
        <input id="surname" type="text" formControlName="surname" />
    </div>
    <div>
        <label for="email">Email: </label>
        <input id="email" type="text" formControlName="email" />
    </div>

    <div formArrayName="addresses">
        <label>Adresy:</label>
        @if (addresses.length === 0) {
            <small>Brak adresów. Możesz dodać nowy adres poniżej.</small>
        }

        @for (_ of addresses.controls; track $index) {
            <app-address-part [group]="getAddressGroup($index)" (remove)="removeAddress($index)"></app-address-part>
        }

        <div>
            <button type="button" (click)="addAddress()">Dodaj adres</button>
        </div>
    </div>

    <div>
        <button type="submit" [disabled]="userForm.invalid">Zapisz</button>
        <button type="button" (click)="onCancel()">Anuluj</button>
    </div>
</form>